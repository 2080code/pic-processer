!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).PicProcesser=t()}(this,function(){"use strict";function e(e){return new Promise((t,n)=>{const r=new FileReader;r.addEventListener("load",()=>{t(null==r?void 0:r.result)},!1),r.addEventListener("loadend",()=>{console.log("loadend",r),t(null==r?void 0:r.result)}),r.addEventListener("error",()=>{n(new Error("getDataURL error!"))}),r.addEventListener("abort",()=>{n(new Error("getDataURL abort!"))}),e&&[Blob,File].some(t=>e instanceof t)?r.readAsDataURL(e):n(new Error("Unspecified file!"))})}function t(e,t=.5,n=null,r="image/jpeg"){return new Promise((o,a)=>{let i="";const s=new Image;n&&n<2&&a(new Error("maxWidth must be greater than 1!")),s.addEventListener("loadstart",()=>{}),s.addEventListener("load",()=>{const e=document.createElement("canvas");let a=1;n&&s.width>n&&(a=n/s.width);const d=s.width*a,l=s.height*a;e.width=d,e.height=l,e.getContext("2d").drawImage(s,0,0,d,l),i=e.toDataURL(r,+t),o(i)},!1),s.addEventListener("loadend",()=>{o(i)}),s.addEventListener("error",()=>{a(new Error("compress error!"))}),s.addEventListener("abort",()=>{a(new Error("compress abort!"))}),e&&[Blob,File].some(t=>e instanceof t)?this.getDataURL(e).then(e=>{s.src=e}).catch(e=>{a(e)}):a(new Error("no file!"))})}function n(e,t){const n=t.split(","),r=n[0].match(/:(.*?);/)[1],o=window.atob(n[1]);let a=o.length;const i=new Uint8Array(a);for(;a--;)i[a]=o.charCodeAt(a);return new File([i],e,{type:r})}return class{constructor(){this.compress=t,this.getDataURL=e,this.dataURLtoFile=n}}});
//# sourceMappingURL=pic-processer.min.js.map
